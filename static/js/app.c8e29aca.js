(function(e){function t(t){for(var n,s,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,i=1;i<o.length;i++){var l=o[i];0!==a[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},a={app:0},r=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"030c":function(e,t,o){},"034f":function(e,t,o){"use strict";o("85ec")},"090c":function(e,t,o){"use strict";o("dcc5")},"15f3":function(e,t,o){"use strict";o("d3b1")},"1da2":function(e,t,o){"use strict";o("fdb0")},4809:function(e,t,o){"use strict";o("4fda")},"4fda":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("bc3a"),a=o.n(n),r=o("2b0e"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{id:"app"}},[o("el-aside",{attrs:{width:"200px"}},[o("Menu")],1),o("el-main",{staticStyle:{"padding-top":"0px"}},[o("router-view",{key:e.$route.path})],1)],1)},i=[],l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-menu",{attrs:{"default-active":"1"}},e._l(e.menuItems,(function(t,n){return o("router-link",{key:n,attrs:{to:t.routName}},[o("el-menu-item",[o("i",{class:t.icon}),e._v(" "+e._s(t.title)+" ")])],1)})),1)},c=[],u={name:"Menu",data:function(){return{menuItems:[{title:"Get product list",icon:"el-icon-document",routName:{name:"ProductList"}},{title:"Create product",icon:"el-icon-document-add",routName:{name:"ProductFormView"}},{title:"Entities",icon:"el-icon-document-add",routName:{name:"UniversalListView"}}]}},methods:{}},d=u,p=(o("4809"),o("2877")),f=Object(p["a"])(d,l,c,!1,null,"36e70117",null),m=f.exports,h={name:"app",components:{Menu:m},data:function(){return{}}},b=h,_=(o("034f"),Object(p["a"])(b,s,i,!1,null,null,null)),v=_.exports,g=o("5c96"),y=o.n(g),k=(o("0fae"),o("b2d6")),F=o.n(k);r["default"].use(y.a,{locale:F.a});var S=o("8c4f"),x=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,"empty-text":"Loading data...",border:""}},[o("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),o("el-table-column",{attrs:{prop:"name",label:"NAME"}}),o("el-table-column",{attrs:{prop:"sku",label:"SKU"}}),o("el-table-column",{attrs:{prop:"supplier.name",label:"SUPPLIER"}}),o("el-table-column",{attrs:{prop:"categories[0].name",label:"CATEGORY"}}),o("el-table-column",{attrs:{label:"Action",width:"172"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("router-link",{attrs:{to:{name:"ProductFormViewEdit",params:{id:t.row.id}}}},[o("el-button",{staticClass:"action_btn",attrs:{size:"mini"}},[e._v(" Edit ")])],1),o("el-button",{staticClass:"action_btn",attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleDelete(t.row.id)}}},[e._v(" Delete ")])]}}])})],1)},$=[],w=(o("c975"),o("a434"),o("d3b7"),{name:"GetListProducts",data:function(){return{loading:!0,request_error:!1,products:[]}},methods:{get_product_list:function(){var e=this;this.clear_data(),this.$axios.get("stock/").then((function(t){e.products=t.data.response_data.content})).catch((function(t){console.log(t),e.request_error=!0})).finally((function(){return e.loading=!1}))},clear_data:function(){this.loading=!0,this.request_error=!1,this.products=[],this.product_keys=[]},handleDelete:function(e){var t=this;this.$axios.delete("stock/product/".concat(e,"/")).then((function(o){console.log("successfully deleted. Server responded: ",o),t.products.splice(t.products.indexOf((function(t){return t.id===e})),1)})).catch((function(e){console.log(e),t.request_error=!0}))}},created:function(){this.get_product_list()}}),D=w,E=(o("b5eb"),Object(p["a"])(D,x,$,!1,null,"90c37952",null)),C=E.exports,P=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",staticClass:"product-form",attrs:{model:e.formFields,"label-position":"top",size:"small"}},[o("el-form-item",[o("el-input",{attrs:{disabled:""},model:{value:e.formFields.id,callback:function(t){e.$set(e.formFields,"id",t)},expression:"formFields.id"}},[o("template",{slot:"prepend"},[e._v("id")])],2)],1),o("el-form-item",[o("el-input",{model:{value:e.formFields.name,callback:function(t){e.$set(e.formFields,"name",t)},expression:"formFields.name"}},[o("template",{slot:"prepend"},[e._v("name")])],2)],1),o("el-form-item",[o("el-input",{model:{value:e.formFields.sku,callback:function(t){e.$set(e.formFields,"sku",t)},expression:"formFields.sku"}},[o("template",{slot:"prepend"},[e._v("sku")])],2)],1),o("product-form-supplier",{attrs:{"selected-supplier":e.formFields.supplier},on:{"update:selectedSupplier":function(t){return e.$set(e.formFields,"supplier",t)},"update:selected-supplier":function(t){return e.$set(e.formFields,"supplier",t)}}}),o("product-form-category",{attrs:{"selected-categories":e.selectedCategoryNames},on:{"update:selectedCategories":function(t){e.selectedCategoryNames=t},"update:selected-categories":function(t){e.selectedCategoryNames=t},"data-exchange":e.recieveUserSelections}}),o("product-from-stock",{attrs:{product_id:e.formFields.id,"storehouses-balance":e.formFields.storehouses_balance},on:{"update:storehousesBalance":function(t){return e.$set(e.formFields,"storehouses_balance",t)},"update:storehouses-balance":function(t){return e.$set(e.formFields,"storehouses_balance",t)},"update-storehouses-balance":e.receiveStorehousesBalance}}),o("el-form-item",[e.formFields.id?e._e():o("el-button",{attrs:{type:"success"},on:{click:e.onSave}},[e._v("Save")]),e.formFields.id?o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onUpdate(e.formFields.id)}}},[e._v("Update")]):e._e(),e.formFields.id?o("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.onDelete(e.formFields.id)}}},[e._v("Delete")]):e._e()],1)],1)},O=[],L=(o("4160"),o("b0c0"),o("25f0"),o("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Categories"}},[o("el-checkbox-group",{model:{value:e.selectedCategories,callback:function(t){e.selectedCategories=t},expression:"selectedCategories"}},e._l(e.allCategories,(function(t){return o("el-checkbox-button",{key:t.id,attrs:{label:t.name},on:{change:e.passData}})})),1)],1):e._e()}),j=[],q=(o("7db0"),{name:"ProductFormCategory",props:["selectedCategories"],data:function(){return{dataLoaded:!1,allCategories:[]}},computed:{selectedCategoryObjects:function(){var e=this,t=[];return this.selectedCategories.forEach((function(o){t.push(e.getObjectByName(o))})),t}},methods:{loadData:function(){var e=this;try{this.$axios.get("stock/categories/").then((function(t){var o=t.data.response_data;e.allCategories=o,e.dataLoaded=!0})).catch((function(e){console.log(e)}))}catch(t){"TypeError"==t.name&&console.log("Create mode")}},getObjectByName:function(e){var t=this.allCategories.find((function(t){return t.name===e}));return t},passData:function(){this.$emit("data-exchange","categories",this.selectedCategoryObjects)}},created:function(){this.loadData()}}),U=q,T=(o("15f3"),Object(p["a"])(U,L,j,!1,null,"2e66b4f3",null)),N=T.exports,V=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Supplier"}},[o("el-select",{attrs:{"value-key":"id",placeholder:"Select supplier"},model:{value:e.selectedSup,callback:function(t){e.selectedSup=t},expression:"selectedSup"}},e._l(e.suppliersList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e()},I=[],M={name:"ProductFormSupplier",props:["selectedSupplier"],data:function(){return{suppliersList:[],dataLoaded:!1}},computed:{selectedSup:{get:function(){var e=this;try{var t=this.suppliersList.find((function(t){return e.selectedSupplier.id===t.id}));return t}catch(o){return console.log("Something went wrong with selectedSup calculation",o),""}},set:function(e){this.$emit("update:selected-supplier",e)}}},methods:{loadData:function(){var e=this;try{this.$axios.get("stock/suppliers/").then((function(t){var o=t.data.response_data;e.suppliersList=o,e.dataLoaded=!0})).catch((function(e){console.log(e)}))}catch(t){"TypeError"==t.name&&console.log("Create mode")}},updateSelectedElem:function(){}},created:function(){this.loadData()}},R=M,z=Object(p["a"])(R,V,I,!1,null,"4af15b3c",null),A=z.exports,B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Stock"}},e._l(e.stocks,(function(t){return o("product-form-stock-el-input",{key:t.id,attrs:{storehouse_name:t.name,storehouse_id:t.id,quantity:t.quantity,disabled:null!==e.product_id},on:{"update:quantity":function(o){return e.$set(t,"quantity",o)}}})})),1):e._e()},G=[],Q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-input",{attrs:{"aria-label":"asd",disabled:e.disabled},on:{input:e.updateParent},model:{value:e.stockData.local_quantity,callback:function(t){e.$set(e.stockData,"local_quantity",t)},expression:"stockData.local_quantity"}},[o("template",{slot:"prepend"},[e._v(e._s(e.stockData.local_storehouse_name))])],2)},J=[],H={name:"ProductFormStockElInput",props:["storehouse_name","storehouse_id","quantity","disabled"],data:function(){var e={local_storehouse_name:this.storehouse_name,local_storehouse_id:this.storehouse_id,local_quantity:this.quantity};return{stockData:e}},methods:{updateParent:function(){this.$emit("update:quantity",parseInt(this.stockData.local_quantity))}}},K=H,Y=Object(p["a"])(K,Q,J,!1,null,"0961a916",null),W=Y.exports,X={name:"ProductFormStock",components:{ProductFormStockElInput:W},props:["product_id","storehouses-balance"],data:function(){return{dataLoaded:!1,stocks:[]}},methods:{loadStorehouses:function(){var e=this;this.$axios.get("stock/storehouses/").then((function(t){var o=t.data.response_data;e.stocks=o,e.loadQuantity(e.storehousesBalance),e.dataLoaded=!0})).catch((function(e){console.log(e)}))},updateQuantity:function(){this.$emit("update:storehouses-balance",this.stocks)},loadQuantity:function(e){this.stocks.forEach((function(t){t["quantity"]=0,t["storehouse_id"]=t.id,e.forEach((function(e){t.id===e.storehouse_id&&(t["quantity"]=e.quantity)}))}))}},mounted:function(){this.loadStorehouses()},watch:{stocks:"updateQuantity"}},Z=X,ee=Object(p["a"])(Z,B,G,!1,null,"4e9baf96",null),te=ee.exports,oe={components:{ProductFormCategory:N,ProductFormSupplier:A,ProductFromStock:te},name:"ProductForm",data:function(){return{formFields:{id:null,name:null,sku:null,supplier:null,categories:[],storehouses_balance:[]}}},computed:{selectedCategoryNames:function(){var e=[];return this.formFields.categories.forEach((function(t){return e.push(t.name)})),e}},methods:{onSave:function(){var e=this;this.$axios.post("stock/product/create/",this.formFields).then((function(t){console.log(t),"201 CREATED"===t.data.response_status&&e.$router.push({name:"ProductFormViewEdit",params:{id:"".concat(t.data.data.id)}})})).catch((function(e){console.log(e)}))},onUpdate:function(e){this.$axios.put("stock/product/".concat(e,"/"),this.formFields).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},onDelete:function(e){var t=this;this.$axios.delete("stock/product/".concat(e,"/")).then((function(e){console.log("successfully deleted. Server responded: ",e),t.$router.push({name:"ProductFormView"})})).catch((function(e){console.log(e),t.request_error=!0}))},loadData:function(){var e=this;try{var t=this.$route.params.id.toString();this.$axios.get("stock/product/".concat(t,"/")).then((function(t){var o=t.data.response_data;e.formFields.id=o.id,e.formFields.name=o.name,e.formFields.sku=o.sku,e.formFields.supplier=o.supplier,e.formFields.categories=o.categories,e.formFields.storehouses_balance=o.storehouses_balance})).catch((function(e){console.log("loadData error: ",e)}))}catch(o){"TypeError"==o.name?console.log("Create mode"):console.log(o)}},recieveUserSelections:function(e,t){this.formFields[e]=t},receiveStorehousesBalance:function(e,t){console.log(e,t)}},created:function(){this.loadData()}},ne=oe,ae=(o("a9b4"),Object(p["a"])(ne,P,O,!1,null,"0d1e47d2",null)),re=ae.exports,se=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-radio-group",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.entities,(function(t){return o("el-radio-button",{key:t.name,attrs:{label:t}},[e._v(" "+e._s(t.name)+" ")])})),1),o("universal-list-table",{staticClass:"table",attrs:{selected:e.selected}})],1)},ie=[],le=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.loadedData?o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.loadedData,"empty-text":"Loading data...",border:""}},[e._l(e.headers,(function(e){return o("el-table-column",{key:e,attrs:{sortable:"id"==e,prop:e,label:e}})})),o("el-table-column",{attrs:{label:"Action",width:"172"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("router-link",{attrs:{to:{name:"UniversalFormView",params:{type:e.selected.url,id:t.row.id}}}},[o("el-button",{staticClass:"action_btn",attrs:{size:"mini"}},[e._v(" Edit ")])],1),o("el-button",{staticClass:"action_btn",attrs:{size:"mini",type:"danger",disabled:""},on:{click:function(o){return e.handleDelete(e.selected.url,t.row.id)}}},[e._v(" Delete ")])]}}],null,!1,4095428349)})],2):e._e()},ce=[],ue=(o("99af"),o("b64b"),{name:"UniversalListTable",props:["selected"],data:function(){return{loadedData:null,request_error:!1}},computed:{headers:function(){return Object.keys(this.loadedData[0])}},methods:{loadData:function(e){var t=this;this.$axios.get("stock/".concat(e,"/")).then((function(e){t.loadedData=e.data.response_data})).catch((function(e){console.log(e),t.request_error=!0}))},handleDelete:function(e,t){var o=this;this.$axios.delete("stock/".concat(e,"/").concat(t,"/")).then((function(e){console.log("successfully deleted. Server responded: ",e),o.loadData})).catch((function(e){console.log(e),o.request_error=!0}))}},mounted:function(){this.loadData(this.selected.url)},watch:{selected:function(e){this.loadData(e.url)}}}),de=ue,pe=(o("090c"),Object(p["a"])(de,le,ce,!1,null,"73cbece8",null)),fe=pe.exports,me={components:{UniversalListTable:fe},name:"UniversalListView",data:function(){return{entities:[{name:"SUPPLIERS",url:"suppliers"},{name:"CATEGORIES",url:"categories"},{name:"STOREHOUSES",url:"storehouses"}],selected:{name:"SUPPLIERS",url:"suppliers"}}}},he=me,be=(o("1da2"),Object(p["a"])(he,se,ie,!1,null,"1417295e",null)),_e=be.exports,ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",staticClass:"form",attrs:{model:e.formFields,"label-position":"top",size:"small"}},[o("el-form-item",[o("el-select",{attrs:{disabled:""},model:{value:e.itemType,callback:function(t){e.itemType=t},expression:"itemType"}})],1),e._l(e.formFields,(function(t,n){return o("el-form-item",{key:n},[o("el-input",{attrs:{disabled:"id"==n},model:{value:e.formFields[n],callback:function(t){e.$set(e.formFields,n,t)},expression:"formFields[key]"}},[o("template",{slot:"prepend"},[e._v(e._s(n))])],2)],1)})),o("el-form-item",[e.formFields.id?e._e():o("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"success"},on:{click:e.onSave}},[e._v("Save")]),e.formFields.id?o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onUpdate(e.$route.params.type,e.formFields.id)}}},[e._v("Update")]):e._e(),e.formFields.id?o("el-button",{attrs:{disabled:"",type:"danger"},on:{click:function(t){return e.onDelete(e.formFields.id)}}},[e._v("Delete")]):e._e()],1)],2)},ge=[],ye={name:"UniversalFormView",data:function(){return{itemType:this.$route.params.type,formFields:{}}},methods:{loadData:function(e,t){var o=this;this.$axios.get("stock/".concat(e,"/").concat(t,"/")).then((function(e){var t=e.data.response_data;o.formFields=t})).catch((function(e){console.log("loadData error: ",e)}))},onSave:function(){},onUpdate:function(e,t){this.$axios.put("stock/".concat(e,"/").concat(t,"/"),this.formFields).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},onDelete:function(){}},created:function(){this.loadData(this.$route.params.type,this.$route.params.id)}},ke=ye,Fe=(o("ee50"),Object(p["a"])(ke,ve,ge,!1,null,"729c1d40",null)),Se=Fe.exports;r["default"].use(S["a"]);var xe=[{path:"/",name:"index",component:C},{path:"/product-list",name:"ProductList",component:C},{path:"/product-form",name:"ProductFormView",component:re},{path:"/product-form/:id",name:"ProductFormViewEdit",component:re},{path:"/universal-list/",name:"UniversalListView",component:_e},{path:"/universal-form/:type/:id",name:"UniversalFormView",component:Se}],$e=new S["a"]({routes:xe}),we=$e;a.a.defaults.baseURL="https://pydjango-geek-stockcontrol.herokuapp.com/",r["default"].config.productionTip=!1,r["default"].prototype.$axios=a.a,new r["default"]({router:we,render:function(e){return e(v)}}).$mount("#app")},6165:function(e,t,o){},"85ec":function(e,t,o){},a9b4:function(e,t,o){"use strict";o("030c")},b5eb:function(e,t,o){"use strict";o("bb05")},bb05:function(e,t,o){},d3b1:function(e,t,o){},dcc5:function(e,t,o){},ee50:function(e,t,o){"use strict";o("6165")},fdb0:function(e,t,o){}});
//# sourceMappingURL=app.c8e29aca.js.map