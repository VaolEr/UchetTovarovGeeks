(function(e){function t(t){for(var n,s,c=t[0],i=t[1],u=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,c=1;c<o.length;c++){var i=o[c];0!==r[i]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},r={app:0},a=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";o("85ec")},"15f3":function(e,t,o){"use strict";o("d3b1")},5361:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("bc3a"),r=o.n(n),a=o("2b0e"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{id:"app"}},[o("el-aside",{attrs:{width:"200px"}},[o("Menu")],1),o("el-main",{staticStyle:{"padding-top":"0px"}},[o("router-view",{key:e.$route.path})],1)],1)},c=[],i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-menu",{attrs:{"default-active":"1"}},e._l(e.menuItems,(function(t,n){return o("router-link",{key:n,attrs:{to:t.routName}},[o("el-menu-item",[o("i",{class:t.icon}),e._v(" "+e._s(t.title)+" ")])],1)})),1)},u=[],l={name:"Menu",data:function(){return{menuItems:[{title:"Get product list",icon:"el-icon-document",routName:{name:"ProductList"}},{title:"Create product",icon:"el-icon-document-add",routName:{name:"ProductFormView"}}]}},methods:{}},d=l,p=(o("a09d"),o("2877")),f=Object(p["a"])(d,i,u,!1,null,"cce789a0",null),m=f.exports,h={name:"app",components:{Menu:m},data:function(){return{}}},_=h,b=(o("034f"),Object(p["a"])(_,s,c,!1,null,null,null)),g=b.exports,y=o("5c96"),v=o.n(y),k=(o("0fae"),o("b2d6")),F=o.n(k);a["default"].use(v.a,{locale:F.a});var x=o("8c4f"),S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.products.length?o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,"empty-text":"No info",border:""}},[e._l(e.product_keys,(function(e,t){return o("el-table-column",{key:t,attrs:{prop:e,label:e}})})),o("el-table-column",{attrs:{label:"Action"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("router-link",{attrs:{to:{name:"ProductFormViewEdit",params:{id:t.row.id}}}},[o("el-button",{attrs:{size:"mini"}},[e._v(" Edit ")])],1),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleDelete(t.row.id)}}},[e._v(" Delete ")])]}}],null,!1,1902459267)})],2):e._e()},$=[],w=(o("c975"),o("a434"),o("b64b"),o("d3b7"),{name:"GetListProducts",data:function(){return{loading:!0,request_error:!1,products:[],product_keys:[]}},methods:{get_product_list:function(){var e=this;this.clear_data(),this.$axios.get("stock/").then((function(t){e.products=t.data.response_data,e.product_keys=Object.keys(e.products[0])})).catch((function(t){console.log(t),e.request_error=!0})).finally((function(){return e.loading=!1}))},clear_data:function(){this.loading=!0,this.request_error=!1,this.products=[],this.product_keys=[]},handleDelete:function(e){var t=this;this.$axios.delete("stock/product/".concat(e,"/")).then((function(o){console.log("successfully deleted. Server responded: ",o),t.products.splice(t.products.indexOf((function(t){return t.id===e})),1)})).catch((function(e){console.log(e),t.request_error=!0}))}},created:function(){this.get_product_list()}}),P=w,C=Object(p["a"])(P,S,$,!1,null,"1852794b",null),O=C.exports,E=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",staticClass:"product-form",attrs:{model:e.formFields,"label-position":"top",size:"small"}},[o("el-form-item",[o("el-input",{attrs:{disabled:""},model:{value:e.formFields.id,callback:function(t){e.$set(e.formFields,"id",t)},expression:"formFields.id"}},[o("template",{slot:"prepend"},[e._v("id")])],2)],1),o("el-form-item",[o("el-input",{model:{value:e.formFields.name,callback:function(t){e.$set(e.formFields,"name",t)},expression:"formFields.name"}},[o("template",{slot:"prepend"},[e._v("name")])],2)],1),o("el-form-item",[o("el-input",{model:{value:e.formFields.sku,callback:function(t){e.$set(e.formFields,"sku",t)},expression:"formFields.sku"}},[o("template",{slot:"prepend"},[e._v("sku")])],2)],1),o("product-form-supplier",{attrs:{"selected-supplier":e.formFields.supplier},on:{"update:selectedSupplier":function(t){return e.$set(e.formFields,"supplier",t)},"update:selected-supplier":function(t){return e.$set(e.formFields,"supplier",t)}}}),o("product-form-category",{attrs:{"selected-categories":e.selectedCategoryNames},on:{"update:selectedCategories":function(t){e.selectedCategoryNames=t},"update:selected-categories":function(t){e.selectedCategoryNames=t},"data-exchange":e.recieveUserSelections}}),o("product-from-stock",{attrs:{product_id:e.formFields.id,"storehouses-balance":e.formFields.storehouses_balance},on:{"update:storehousesBalance":function(t){return e.$set(e.formFields,"storehouses_balance",t)},"update:storehouses-balance":function(t){return e.$set(e.formFields,"storehouses_balance",t)},"update-storehouses-balance":e.receiveStorehousesBalance}}),o("el-form-item",[e.formFields.id?e._e():o("el-button",{attrs:{type:"success"},on:{click:e.onSave}},[e._v("Save")]),e.formFields.id?o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onUpdate(e.formFields.id)}}},[e._v("Update")]):e._e(),e.formFields.id?o("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.onDelete(e.formFields.id)}}},[e._v("Delete")]):e._e()],1)],1)},j=[],D=(o("4160"),o("b0c0"),o("25f0"),o("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Categories"}},[o("el-checkbox-group",{model:{value:e.selectedCategories,callback:function(t){e.selectedCategories=t},expression:"selectedCategories"}},e._l(e.allCategories,(function(t){return o("el-checkbox-button",{key:t.id,attrs:{label:t.name},on:{change:e.passData}})})),1)],1):e._e()}),q=[],L=(o("7db0"),{name:"ProductFormCategory",props:["selectedCategories"],data:function(){return{dataLoaded:!1,allCategories:[]}},computed:{selectedCategoryObjects:function(){var e=this,t=[];return this.selectedCategories.forEach((function(o){t.push(e.getObjectByName(o))})),t}},methods:{loadData:function(){var e=this;try{this.$axios.get("stock/categories/").then((function(t){var o=t.data.response_data;e.allCategories=o,e.dataLoaded=!0})).catch((function(e){console.log(e)}))}catch(t){"TypeError"==t.name&&console.log("Create mode")}},getObjectByName:function(e){var t=this.allCategories.find((function(t){return t.name===e}));return t},passData:function(){this.$emit("data-exchange","categories",this.selectedCategoryObjects)}},created:function(){this.loadData()}}),N=L,M=(o("15f3"),Object(p["a"])(N,D,q,!1,null,"2e66b4f3",null)),T=M.exports,B=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Supplier"}},[o("el-select",{attrs:{"value-key":"id",placeholder:"Select supplier"},model:{value:e.selectedSup,callback:function(t){e.selectedSup=t},expression:"selectedSup"}},e._l(e.suppliersList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e()},U=[],V={name:"ProductFormSupplier",props:["selectedSupplier"],data:function(){return{suppliersList:[],dataLoaded:!1}},computed:{selectedSup:{get:function(){var e=this;try{var t=this.suppliersList.find((function(t){return e.selectedSupplier.id===t.id}));return t}catch(o){return console.log("Something went wrong with selectedSup calculation",o),""}},set:function(e){this.$emit("update:selected-supplier",e)}}},methods:{loadData:function(){var e=this;try{this.$axios.get("stock/suppliers/").then((function(t){var o=t.data.response_data;e.suppliersList=o,e.dataLoaded=!0})).catch((function(e){console.log(e)}))}catch(t){"TypeError"==t.name&&console.log("Create mode")}},updateSelectedElem:function(){}},created:function(){this.loadData()}},I=V,Q=Object(p["a"])(I,B,U,!1,null,"4af15b3c",null),z=Q.exports,A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Stock"}},e._l(e.stocks,(function(t){return o("product-form-stock-el-input",{key:t.id,attrs:{storehouse_name:t.name,storehouse_id:t.id,quantity:t.quantity,disabled:null!==e.product_id},on:{"update:quantity":function(o){return e.$set(t,"quantity",o)}}})})),1):e._e()},G=[],J=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-input",{attrs:{"aria-label":"asd",disabled:e.disabled},on:{input:e.updateParent},model:{value:e.stockData.local_quantity,callback:function(t){e.$set(e.stockData,"local_quantity",t)},expression:"stockData.local_quantity"}},[o("template",{slot:"prepend"},[e._v(e._s(e.stockData.local_storehouse_name))])],2)},R=[],H={name:"ProductFormStockElInput",props:["storehouse_name","storehouse_id","quantity","disabled"],data:function(){var e={local_storehouse_name:this.storehouse_name,local_storehouse_id:this.storehouse_id,local_quantity:this.quantity};return{stockData:e}},methods:{updateParent:function(){this.$emit("update:quantity",parseInt(this.stockData.local_quantity))}}},K=H,W=Object(p["a"])(K,J,R,!1,null,"0961a916",null),X=W.exports,Y={name:"ProductFormStock",components:{ProductFormStockElInput:X},props:["product_id","storehouses-balance"],data:function(){return{dataLoaded:!1,stocks:[]}},methods:{loadStorehouses:function(){var e=this;this.$axios.get("stock/storehouses/").then((function(t){var o=t.data.response_data;e.stocks=o,e.loadQuantity(e.storehousesBalance),e.dataLoaded=!0})).catch((function(e){console.log(e)}))},updateQuantity:function(){this.$emit("update:storehouses-balance",this.stocks)},loadQuantity:function(e){this.stocks.forEach((function(t){t["quantity"]=0,t["storehouse_id"]=t.id,e.forEach((function(e){t.id===e.storehouse_id&&(t["quantity"]=e.quantity)}))}))}},mounted:function(){this.loadStorehouses()},watch:{stocks:"updateQuantity"}},Z=Y,ee=Object(p["a"])(Z,A,G,!1,null,"4e9baf96",null),te=ee.exports,oe={components:{ProductFormCategory:T,ProductFormSupplier:z,ProductFromStock:te},name:"ProductForm",data:function(){return{formFields:{id:null,name:null,sku:null,supplier:null,categories:[],storehouses_balance:[]}}},computed:{selectedCategoryNames:function(){var e=[];return this.formFields.categories.forEach((function(t){return e.push(t.name)})),e}},methods:{onSave:function(){var e=this;this.$axios.post("stock/product/create/",this.formFields).then((function(t){console.log(t),"201 CREATED"===t.data.response_status&&e.$router.push({name:"ProductFormViewEdit",params:{id:"".concat(t.data.data.id)}})})).catch((function(e){console.log(e)}))},onUpdate:function(e){this.$axios.put("stock/product/".concat(e,"/"),this.formFields).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},onDelete:function(e){var t=this;this.$axios.delete("stock/product/".concat(e,"/")).then((function(e){console.log("successfully deleted. Server responded: ",e),t.$router.push({name:"ProductFormView"})})).catch((function(e){console.log(e),t.request_error=!0}))},loadData:function(){var e=this;try{var t=this.$route.params.id.toString();this.$axios.get("stock/product/".concat(t,"/")).then((function(t){var o=t.data.response_data;e.formFields.id=o.id,e.formFields.name=o.name,e.formFields.sku=o.sku,e.formFields.supplier=o.supplier,e.formFields.categories=o.categories,e.formFields.storehouses_balance=o.storehouses_balance})).catch((function(e){console.log("loadData error: ",e)}))}catch(o){"TypeError"==o.name?console.log("Create mode"):console.log(o)}},recieveUserSelections:function(e,t){this.formFields[e]=t},receiveStorehousesBalance:function(e,t){console.log(e,t)}},created:function(){this.loadData()}},ne=oe,re=(o("8b43"),Object(p["a"])(ne,E,j,!1,null,"6b6f73cd",null)),ae=re.exports;a["default"].use(x["a"]);var se=[{path:"/",name:"index",component:O},{path:"/product-list",name:"ProductList",component:O},{path:"/product-form",name:"ProductFormView",component:ae},{path:"/product-form/:id",name:"ProductFormViewEdit",component:ae}],ce=new x["a"]({routes:se}),ie=ce;r.a.defaults.baseURL="https://pydjango-geek-stockcontrol.herokuapp.com/",a["default"].config.productionTip=!1,a["default"].prototype.$axios=r.a,new a["default"]({router:ie,render:function(e){return e(g)}}).$mount("#app")},"85ec":function(e,t,o){},8752:function(e,t,o){},"8b43":function(e,t,o){"use strict";o("8752")},a09d:function(e,t,o){"use strict";o("5361")},d3b1:function(e,t,o){}});
//# sourceMappingURL=app.0f0683ce.js.map