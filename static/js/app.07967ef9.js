(function(e){function t(t){for(var a,r,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],a=!0,i=1;i<o.length;i++){var l=o[i];0!==n[l]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=o[0]))}return e}var a={},n={app:0},s=[];function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=a,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"030c":function(e,t,o){},"034f":function(e,t,o){"use strict";o("85ec")},"090c":function(e,t,o){"use strict";o("dcc5")},"15f3":function(e,t,o){"use strict";o("d3b1")},"1da2":function(e,t,o){"use strict";o("fdb0")},4809:function(e,t,o){"use strict";o("4fda")},"4c12":function(e,t,o){"use strict";o("d8ca")},"4fda":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("bc3a"),n=o.n(a),s=o("2b0e"),r=o("85fe"),i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{id:"app"}},[o("el-aside",{attrs:{width:"200px"}},[o("Menu")],1),o("el-main",{staticStyle:{"padding-top":"0px"}},[o("router-view",{key:e.$route.path})],1)],1)},l=[],c=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-menu",{attrs:{"default-active":"1"}},e._l(e.menuItems,(function(t,a){return o("router-link",{key:a,attrs:{to:t.routName}},[o("el-menu-item",[o("i",{class:t.icon}),e._v(" "+e._s(t.title)+" ")])],1)})),1)},u=[],d={name:"Menu",data:function(){return{menuItems:[{title:"Get product list",icon:"el-icon-document",routName:{name:"ProductList"}},{title:"Create product",icon:"el-icon-document-add",routName:{name:"ProductFormView"}},{title:"Entities",icon:"el-icon-document-add",routName:{name:"UniversalListView"}}]}},methods:{}},p=d,f=(o("4809"),o("2877")),m=Object(f["a"])(p,c,u,!1,null,"36e70117",null),h=m.exports,b={name:"app",components:{Menu:h},data:function(){return{}}},_=b,v=(o("034f"),Object(f["a"])(_,i,l,!1,null,null,null)),g=v.exports,y=o("5c96"),k=o.n(y),F=(o("0fae"),o("b2d6")),S=o.n(F);s["default"].use(k.a,{locale:S.a});var x=o("8c4f"),$=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.products,"empty-text":"Loading data...",border:""}},[o("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),o("el-table-column",{attrs:{prop:"name",label:"NAME"}}),o("el-table-column",{attrs:{prop:"sku",label:"SKU"}}),o("el-table-column",{attrs:{prop:"supplier.name",label:"SUPPLIER"}}),o("el-table-column",{attrs:{prop:"categories[0].name",label:"CATEGORY"}}),o("el-table-column",{attrs:{label:"Action",width:"172"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("router-link",{attrs:{to:{name:"ProductFormViewEdit",params:{id:t.row.id}}}},[o("el-button",{staticClass:"action_btn",attrs:{size:"mini"}},[e._v(" Edit ")])],1),o("el-button",{staticClass:"action_btn",attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.handleDelete(t.row.id)}}},[e._v(" Delete ")])]}}])})],1),o("div",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.handleScrollToBottom,expression:"handleScrollToBottom"}]},[e.page<e.totalPages?o("el-button",{staticClass:"load_indicator",attrs:{type:"primary",loading:e.loading,size:"small"},on:{click:e.getProductList}},[e._v(" Load more... ")]):e._e()],1)],1)},w=[],D=(o("99af"),o("c975"),o("a434"),o("d3b7"),o("2909")),P={name:"GetListProducts",data:function(){return{loading:!0,request_error:!1,page:0,totalPages:0,pageSize:10,products:[]}},methods:{getProductList:function(){var e=this;this.loading=!0,this.$axios.get("stock/?page=".concat(this.page,"&size=").concat(this.pageSize)).then((function(t){var o;(o=e.products).push.apply(o,Object(D["a"])(t.data.response_data.content)),e.totalPages=t.data.response_data.total_pages})).catch((function(t){console.log(t),e.request_error=!0})).finally((function(){e.loading=!1,e.page++}))},clear_data:function(){this.loading=!0,this.request_error=!1,this.products=[]},handleDelete:function(e){var t=this;this.$axios.delete("stock/product/".concat(e,"/")).then((function(o){console.log("successfully deleted. Server responded: ",o),t.products.splice(t.products.indexOf((function(t){return t.id===e})),1)})).catch((function(e){console.log(e),t.request_error=!0}))},handleScrollToBottom:function(e){e&&(this.loading||(this.page<this.totalPages&&this.getProductList(),console.log("I'm scrolled all way through!",e,this.page)))}},created:function(){this.getProductList()}},E=P,C=(o("4c12"),Object(f["a"])(E,$,w,!1,null,"5b8e6f44",null)),O=C.exports,L=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",staticClass:"product-form",attrs:{model:e.formFields,"label-position":"top",size:"small"}},[o("el-form-item",[o("el-input",{attrs:{disabled:""},model:{value:e.formFields.id,callback:function(t){e.$set(e.formFields,"id",t)},expression:"formFields.id"}},[o("template",{slot:"prepend"},[e._v("id")])],2)],1),o("el-form-item",[o("el-input",{model:{value:e.formFields.name,callback:function(t){e.$set(e.formFields,"name",t)},expression:"formFields.name"}},[o("template",{slot:"prepend"},[e._v("name")])],2)],1),o("el-form-item",[o("el-input",{model:{value:e.formFields.sku,callback:function(t){e.$set(e.formFields,"sku",t)},expression:"formFields.sku"}},[o("template",{slot:"prepend"},[e._v("sku")])],2)],1),o("product-form-supplier",{attrs:{"selected-supplier":e.formFields.supplier},on:{"update:selectedSupplier":function(t){return e.$set(e.formFields,"supplier",t)},"update:selected-supplier":function(t){return e.$set(e.formFields,"supplier",t)}}}),o("product-form-category",{attrs:{"selected-categories":e.selectedCategoryNames},on:{"update:selectedCategories":function(t){e.selectedCategoryNames=t},"update:selected-categories":function(t){e.selectedCategoryNames=t},"data-exchange":e.recieveUserSelections}}),o("product-from-stock",{attrs:{product_id:e.formFields.id,"storehouses-balance":e.formFields.storehouses_balance},on:{"update:storehousesBalance":function(t){return e.$set(e.formFields,"storehouses_balance",t)},"update:storehouses-balance":function(t){return e.$set(e.formFields,"storehouses_balance",t)},"update-storehouses-balance":e.receiveStorehousesBalance}}),o("el-form-item",[e.formFields.id?e._e():o("el-button",{attrs:{type:"success"},on:{click:e.onSave}},[e._v("Save")]),e.formFields.id?o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onUpdate(e.formFields.id)}}},[e._v("Update")]):e._e(),e.formFields.id?o("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.onDelete(e.formFields.id)}}},[e._v("Delete")]):e._e()],1)],1)},j=[],q=(o("4160"),o("b0c0"),o("25f0"),o("159b"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Categories"}},[o("el-checkbox-group",{model:{value:e.selectedCategories,callback:function(t){e.selectedCategories=t},expression:"selectedCategories"}},e._l(e.allCategories,(function(t){return o("el-checkbox-button",{key:t.id,attrs:{label:t.name},on:{change:e.passData}})})),1)],1):e._e()}),U=[],T=(o("7db0"),{name:"ProductFormCategory",props:["selectedCategories"],data:function(){return{dataLoaded:!1,allCategories:[]}},computed:{selectedCategoryObjects:function(){var e=this,t=[];return this.selectedCategories.forEach((function(o){t.push(e.getObjectByName(o))})),t}},methods:{loadData:function(){var e=this;try{this.$axios.get("stock/categories/").then((function(t){var o=t.data.response_data;e.allCategories=o,e.dataLoaded=!0})).catch((function(e){console.log(e)}))}catch(t){"TypeError"==t.name&&console.log("Create mode")}},getObjectByName:function(e){var t=this.allCategories.find((function(t){return t.name===e}));return t},passData:function(){this.$emit("data-exchange","categories",this.selectedCategoryObjects)}},created:function(){this.loadData()}}),N=T,V=(o("15f3"),Object(f["a"])(N,q,U,!1,null,"2e66b4f3",null)),I=V.exports,z=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Supplier"}},[o("el-select",{attrs:{"value-key":"id",placeholder:"Select supplier"},model:{value:e.selectedSup,callback:function(t){e.selectedSup=t},expression:"selectedSup"}},e._l(e.suppliersList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t}},[e._v(" "+e._s(t.name)+" ")])})),1)],1):e._e()},B=[],M={name:"ProductFormSupplier",props:["selectedSupplier"],data:function(){return{suppliersList:[],dataLoaded:!1}},computed:{selectedSup:{get:function(){var e=this;try{var t=this.suppliersList.find((function(t){return e.selectedSupplier.id===t.id}));return t}catch(o){return console.log("Something went wrong with selectedSup calculation",o),""}},set:function(e){this.$emit("update:selected-supplier",e)}}},methods:{loadData:function(){var e=this;try{this.$axios.get("stock/suppliers/").then((function(t){var o=t.data.response_data;e.suppliersList=o,e.dataLoaded=!0})).catch((function(e){console.log(e)}))}catch(t){"TypeError"==t.name&&console.log("Create mode")}},updateSelectedElem:function(){}},created:function(){this.loadData()}},R=M,A=Object(f["a"])(R,z,B,!1,null,"4af15b3c",null),G=A.exports,Q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.dataLoaded?o("el-form-item",{attrs:{label:"Stock"}},e._l(e.stocks,(function(t){return o("product-form-stock-el-input",{key:t.id,attrs:{storehouse_name:t.name,storehouse_id:t.id,quantity:t.quantity,disabled:null!==e.product_id},on:{"update:quantity":function(o){return e.$set(t,"quantity",o)}}})})),1):e._e()},J=[],H=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-input",{attrs:{"aria-label":"asd",disabled:e.disabled},on:{input:e.updateParent},model:{value:e.stockData.local_quantity,callback:function(t){e.$set(e.stockData,"local_quantity",t)},expression:"stockData.local_quantity"}},[o("template",{slot:"prepend"},[e._v(e._s(e.stockData.local_storehouse_name))])],2)},K=[],Y={name:"ProductFormStockElInput",props:["storehouse_name","storehouse_id","quantity","disabled"],data:function(){var e={local_storehouse_name:this.storehouse_name,local_storehouse_id:this.storehouse_id,local_quantity:this.quantity};return{stockData:e}},methods:{updateParent:function(){this.$emit("update:quantity",parseInt(this.stockData.local_quantity))}}},W=Y,X=Object(f["a"])(W,H,K,!1,null,"0961a916",null),Z=X.exports,ee={name:"ProductFormStock",components:{ProductFormStockElInput:Z},props:["product_id","storehouses-balance"],data:function(){return{dataLoaded:!1,stocks:[]}},methods:{loadStorehouses:function(){var e=this;this.$axios.get("stock/storehouses/").then((function(t){var o=t.data.response_data;e.stocks=o,e.loadQuantity(e.storehousesBalance),e.dataLoaded=!0})).catch((function(e){console.log(e)}))},updateQuantity:function(){this.$emit("update:storehouses-balance",this.stocks)},loadQuantity:function(e){this.stocks.forEach((function(t){t["quantity"]=0,t["storehouse_id"]=t.id,e.forEach((function(e){t.id===e.storehouse_id&&(t["quantity"]=e.quantity)}))}))}},mounted:function(){this.loadStorehouses()},watch:{stocks:"updateQuantity"}},te=ee,oe=Object(f["a"])(te,Q,J,!1,null,"4e9baf96",null),ae=oe.exports,ne={components:{ProductFormCategory:I,ProductFormSupplier:G,ProductFromStock:ae},name:"ProductForm",data:function(){return{formFields:{id:null,name:null,sku:null,supplier:null,categories:[],storehouses_balance:[]}}},computed:{selectedCategoryNames:function(){var e=[];return this.formFields.categories.forEach((function(t){return e.push(t.name)})),e}},methods:{onSave:function(){var e=this;this.$axios.post("stock/product/create/",this.formFields).then((function(t){console.log(t),"201 CREATED"===t.data.response_status&&e.$router.push({name:"ProductFormViewEdit",params:{id:"".concat(t.data.data.id)}})})).catch((function(e){console.log(e)}))},onUpdate:function(e){this.$axios.put("stock/product/".concat(e,"/"),this.formFields).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},onDelete:function(e){var t=this;this.$axios.delete("stock/product/".concat(e,"/")).then((function(e){console.log("successfully deleted. Server responded: ",e),t.$router.push({name:"ProductFormView"})})).catch((function(e){console.log(e),t.request_error=!0}))},loadData:function(){var e=this;try{var t=this.$route.params.id.toString();this.$axios.get("stock/product/".concat(t,"/")).then((function(t){var o=t.data.response_data;e.formFields.id=o.id,e.formFields.name=o.name,e.formFields.sku=o.sku,e.formFields.supplier=o.supplier,e.formFields.categories=o.categories,e.formFields.storehouses_balance=o.storehouses_balance})).catch((function(e){console.log("loadData error: ",e)}))}catch(o){"TypeError"==o.name?console.log("Create mode"):console.log(o)}},recieveUserSelections:function(e,t){this.formFields[e]=t},receiveStorehousesBalance:function(e,t){console.log(e,t)}},created:function(){this.loadData()}},se=ne,re=(o("a9b4"),Object(f["a"])(se,L,j,!1,null,"0d1e47d2",null)),ie=re.exports,le=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-radio-group",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.entities,(function(t){return o("el-radio-button",{key:t.name,attrs:{label:t}},[e._v(" "+e._s(t.name)+" ")])})),1),o("universal-list-table",{staticClass:"table",attrs:{selected:e.selected}})],1)},ce=[],ue=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.loadedData?o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.loadedData,"empty-text":"Loading data...",border:""}},[e._l(e.headers,(function(e){return o("el-table-column",{key:e,attrs:{sortable:"id"==e,prop:e,label:e}})})),o("el-table-column",{attrs:{label:"Action",width:"172"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("router-link",{attrs:{to:{name:"UniversalFormView",params:{type:e.selected.url,id:t.row.id}}}},[o("el-button",{staticClass:"action_btn",attrs:{size:"mini"}},[e._v(" Edit ")])],1),o("el-button",{staticClass:"action_btn",attrs:{size:"mini",type:"danger",disabled:""},on:{click:function(o){return e.handleDelete(e.selected.url,t.row.id)}}},[e._v(" Delete ")])]}}],null,!1,4095428349)})],2):e._e()},de=[],pe=(o("b64b"),{name:"UniversalListTable",props:["selected"],data:function(){return{loadedData:null,request_error:!1}},computed:{headers:function(){return Object.keys(this.loadedData[0])}},methods:{loadData:function(e){var t=this;this.$axios.get("stock/".concat(e,"/")).then((function(e){t.loadedData=e.data.response_data})).catch((function(e){console.log(e),t.request_error=!0}))},handleDelete:function(e,t){var o=this;this.$axios.delete("stock/".concat(e,"/").concat(t,"/")).then((function(e){console.log("successfully deleted. Server responded: ",e),o.loadData})).catch((function(e){console.log(e),o.request_error=!0}))}},mounted:function(){this.loadData(this.selected.url)},watch:{selected:function(e){this.loadData(e.url)}}}),fe=pe,me=(o("090c"),Object(f["a"])(fe,ue,de,!1,null,"73cbece8",null)),he=me.exports,be={components:{UniversalListTable:he},name:"UniversalListView",data:function(){return{entities:[{name:"SUPPLIERS",url:"suppliers"},{name:"CATEGORIES",url:"categories"},{name:"STOREHOUSES",url:"storehouses"}],selected:{name:"SUPPLIERS",url:"suppliers"}}}},_e=be,ve=(o("1da2"),Object(f["a"])(_e,le,ce,!1,null,"1417295e",null)),ge=ve.exports,ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",staticClass:"form",attrs:{model:e.formFields,"label-position":"top",size:"small"}},[o("el-form-item",[o("el-select",{attrs:{disabled:""},model:{value:e.itemType,callback:function(t){e.itemType=t},expression:"itemType"}})],1),e._l(e.formFields,(function(t,a){return o("el-form-item",{key:a},[o("el-input",{attrs:{disabled:"id"==a},model:{value:e.formFields[a],callback:function(t){e.$set(e.formFields,a,t)},expression:"formFields[key]"}},[o("template",{slot:"prepend"},[e._v(e._s(a))])],2)],1)})),o("el-form-item",[e.formFields.id?e._e():o("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"success"},on:{click:e.onSave}},[e._v("Save")]),e.formFields.id?o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onUpdate(e.$route.params.type,e.formFields.id)}}},[e._v("Update")]):e._e(),e.formFields.id?o("el-button",{attrs:{disabled:"",type:"danger"},on:{click:function(t){return e.onDelete(e.formFields.id)}}},[e._v("Delete")]):e._e()],1)],2)},ke=[],Fe={name:"UniversalFormView",data:function(){return{itemType:this.$route.params.type,formFields:{}}},methods:{loadData:function(e,t){var o=this;this.$axios.get("stock/".concat(e,"/").concat(t,"/")).then((function(e){var t=e.data.response_data;o.formFields=t})).catch((function(e){console.log("loadData error: ",e)}))},onSave:function(){},onUpdate:function(e,t){this.$axios.put("stock/".concat(e,"/").concat(t,"/"),this.formFields).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},onDelete:function(){}},created:function(){this.loadData(this.$route.params.type,this.$route.params.id)}},Se=Fe,xe=(o("ee50"),Object(f["a"])(Se,ye,ke,!1,null,"729c1d40",null)),$e=xe.exports;s["default"].use(x["a"]);var we=[{path:"/",name:"index",component:O},{path:"/product-list",name:"ProductList",component:O},{path:"/product-form",name:"ProductFormView",component:ie},{path:"/product-form/:id",name:"ProductFormViewEdit",component:ie},{path:"/universal-list/",name:"UniversalListView",component:ge},{path:"/universal-form/:type/:id",name:"UniversalFormView",component:$e}],De=new x["a"]({routes:we}),Pe=De;n.a.defaults.baseURL="https://pydjango-geek-stockcontrol.herokuapp.com/",s["default"].use(r["a"]),s["default"].config.productionTip=!1,s["default"].prototype.$axios=n.a,new s["default"]({router:Pe,render:function(e){return e(g)}}).$mount("#app")},6165:function(e,t,o){},"85ec":function(e,t,o){},a9b4:function(e,t,o){"use strict";o("030c")},d3b1:function(e,t,o){},d8ca:function(e,t,o){},dcc5:function(e,t,o){},ee50:function(e,t,o){"use strict";o("6165")},fdb0:function(e,t,o){}});
//# sourceMappingURL=app.07967ef9.js.map